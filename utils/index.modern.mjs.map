{"version":3,"file":"index.modern.mjs","sources":["../src/utils/index.ts"],"sourcesContent":["import { ReactNode } from \"react\";\nimport { ApiError } from \"@datocms/cma-client\";\n\nexport const isServer = typeof window === 'undefined';\n\nexport const chunkArray = (array: any[] | ReactNode[], chunkSize: number) => {\n  const newArr = []\n  for (let i = 0; i < array.length; i += chunkSize)\n    newArr.push(array.slice(i, i + chunkSize));\n  return newArr\n}\n\nexport const parseDatoError = (err: any): string => {\n  const errors = (err as ApiError).errors.map(({ attributes: { code, details } }) => ({ code, field: details?.field, message: details?.message, detailsCode: details?.code, errors: Array.isArray(details?.errors) ? details?.errors.join('. ') : undefined }))\n  return errors.map(({ code, field, message, detailsCode, errors }) => `${code} ${field ? `(${field})` : ''} ${message || ''} ${detailsCode || ''} ${errors ? `(${errors})` : ''}`).join('\\n')\n}\n\nexport const isEmpty = (obj: any) => Object.keys(obj).filter(k => obj[k] !== undefined).length === 0\n\nexport const capitalize = (str: string, lower: boolean = false) => {\n  return (lower ? str.toLowerCase() : str).replace(/(?:^|\\s|[\"'([{])+\\S/g, match => match.toUpperCase());\n}\n\nexport const sleep = (ms: number) => new Promise((resolve, refject) => setTimeout(resolve, ms))\n\nexport const rInt = (min: number, max: number): number => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport const truncateParagraph = (s: string, sentances: number = 1, ellipsis: boolean = true, minLength = 200): string => {\n  if (!s || s.length < minLength)\n    return s;\n\n  let dotIndex = s.split('.')?.slice(0, sentances + 1).join('.').lastIndexOf('.')\n  let qIndex = s.split('? ')?.slice(0, sentances + 1).join('? ').lastIndexOf('? ')\n  const isQuestion = qIndex !== -1 && qIndex < dotIndex || (dotIndex === -1 && qIndex > -1)\n\n  if (dotIndex === -1 && qIndex === -1) {\n    dotIndex = minLength - 1\n    ellipsis = true\n  }\n\n  let str = s.substring(0, isQuestion ? qIndex : dotIndex) //`${s.substring(0, minLength - 1)}${s.substring(minLength - 1).split('.').slice(0, sentances).join('. ')}`\n  return `${str}${ellipsis ? '...' : isQuestion ? '?' : '.'}`;\n}\n\nexport const truncateWords = (text: string, maxLength: number): string => {\n  if (text.length <= maxLength)\n    return text;\n\n  var truncatedText = text.substring(0, maxLength);\n  var lastSpaceIndex = truncatedText.lastIndexOf(' ');\n  if (lastSpaceIndex !== -1) {\n    truncatedText = truncatedText.substr(0, lastSpaceIndex);\n  }\n  return truncatedText + '...';\n}\n\nexport const sortSwedish = <T>(arr: T[], key?: string): T[] => {\n  const alfabet = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"Å\", \"Ä\", \"Ö\"];\n\n  return arr.sort((a, b) => {\n    const ai = alfabet.findIndex((l) => l === (key ? a[key] : a)?.charAt(0).toUpperCase())\n    const bi = alfabet.findIndex((l) => l === (key ? b[key] : b)?.charAt(0).toUpperCase())\n    return !ai ? -1 : ai > bi ? 1 : ai === bi ? 0 : -1\n  })\n}\n\nexport const awaitElement = async <T>(selector: string) => {\n\n  const cleanSelector = function (selector) {\n    (selector.match(/(#[0-9][^\\s:,]*)/g) || []).forEach(function (n) {\n      selector = selector.replace(n, '[id=\"' + n.replace(\"#\", \"\") + '\"]');\n    });\n    return selector;\n  }\n\n  for (let i = 0; i < 100; i++) {\n    const el = document.querySelector(cleanSelector(selector)) as T\n    if (el) return el\n    await sleep(30)\n  }\n\n  throw new Error(`Element ${selector} not found`)\n}"],"names":["pact","state","value","s","o","_settle","bind","v","then","observer","_Pact","prototype","onFulfilled","onRejected","result","callback","this","e","_this","_isSettledPact","thenable","isServer","window","chunkArray","array","chunkSize","i","length","newArr","push","slice","err","errors","map","attributes","details","code","_ref$attributes","field","message","detailsCode","Array","isArray","join","undefined","_ref2","isEmpty","obj","Object","keys","filter","k","capitalize","str","lower","toLowerCase","replace","match","toUpperCase","sleep","ms","Promise","resolve","refject","setTimeout","rInt","min","max","Math","ceil","floor","random","truncateParagraph","sentances","ellipsis","minLength","_s$split","_s$split2","split","lastIndexOf","qIndex","isQuestion","dotIndex","substring","truncateWords","text","maxLength","lastSpaceIndex","truncatedText","substr","sortSwedish","arr","key","sort","a","b","alfabet","findIndex","l","_ref3","charAt","bi","_ref4","ai","awaitElement","selector","_exit2","_temp3","_result","Error","_temp4","_for","_i","el","document","querySelector","forEach","n","cleanSelector","reject"],"mappings":"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"}